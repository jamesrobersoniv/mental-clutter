{{ define "main" }}
<article class="post">
  <!-- Title -->
  <header class="post-header">
    <h1 class="post-title">{{ .Title | upper }}</h1>
  </header>
  
  <!-- Description -->
  {{ if .Params.description }}
  <div class="post-description">
    <p>{{ .Params.description }}</p>
  </div>
  {{ end }}
  
  <!-- Author -->
  {{ if .Params.author }}
  <div class="post-author">
    <p>{{ .Params.author }}</p>
  </div>
  {{ end }}
  
  <!-- Image -->
  {{ $image := .Params.image }}
  {{ if not $image }}
    {{ $image = .Params.featuredImage }}
  {{ end }}
  {{ if not $image }}
    {{ $image = index (.Params.images) 0 }}
  {{ end }}
  
  {{ if $image }}
  <figure class="post-image">
    {{ if hasPrefix $image "http" }}
      <img src="{{ $image }}" alt="{{ .Title }}" class="post-image-img">
    {{ else }}
      <img src="{{ $image | absURL }}" alt="{{ .Title }}" class="post-image-img">
    {{ end }}
    <!-- Image Caption -->
    {{ if .Params.imageCaption }}
    <figcaption class="post-image-caption">{{ .Params.imageCaption }}</figcaption>
    {{ end }}
  </figure>
  {{ end }}
  
  <!-- Body Content -->
  <div class="post-content">
    {{ .Content }}
  </div>
  
  {{ if .Params.tags }}
  <footer class="post-footer">
    <div class="post-tags">
      {{ range .Params.tags }}
      <a href="{{ "/tags/" | absURL }}{{ . | urlize }}" class="tag">{{ . }}</a>
      {{ end }}
    </div>
  </footer>
  {{ end }}
</article>
{{ end }}

